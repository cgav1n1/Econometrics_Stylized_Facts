\documentclass{article}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage[a4paper, total={7in, 11in}]{geometry}
\usepackage[toc,page]{appendix}
\usepackage{listings} % Listing package to add appendix
\usepackage{xcolor}   % Custom colors
\usepackage{graphicx}  % Required to include images
\usepackage{hyperref}% to put links
\usepackage{float} %to place correctly pictures


\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue,
    citecolor=red,
    linktoc=all,    % Links entire section titles in the ToC
    linkcolor=black % Sets ToC links to black; other links remain as specified
}

% Defining colors for the python section
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codeblue}{rgb}{0,0,0.8}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codebackground}{rgb}{0.95,0.95,0.92}
\begin{document}

\title{Mid term Exam for Financial Econometrics with Python}
\author{PRAT Paul; GAVINI Charles; FOURNIER Justin; BLANC Mathieu}
\date{\today}

\maketitle %showcase the title in the top of the page with the informations upper

\tableofcontents %creating a table of contens

%first, introduction
\section{Introduction}
For the midterm assignment, we composed a group of 4 with Gavini Charles; Fournier Justin; Prat Paul and Blanc Mathieu. 
This document contains all the results of our assignment, including tables, figures, and calculations. 
It is composed by \arabic{section} parts, first, importing the good python libraries,
then initialising variables to separate the differents datas (daily, monthly, ..., returns, logreturns,...)


\section{Preliminary}
%Instructions


%At the beginning of your answer to Question 1, indicate clearly:
%- the name and the exact ticker of stock or index you are considering,
%- the length of your sample (number of days, months, years),
%- the initial and final dates of your sample, and
%- the stock market and country in which the stock you selected is traded, or to which the stock index you selected refers to.
%Using the time series you downloaded in PRELIMINARY STEP 1, compute the log-returns at daily, 
%monthly, and annual frequencies and present a table of summary statistics of these three series of returns. 
%The table should be similar to the one appearing in slide n. 91 of the set of slides titled 
%``Lecture 1: Financial Returns: Description and Stylized Facts’’.
\subsection{AMAZON}

The chosen stock is Amazon, because it is higly related in the current actuality. We are very interested in a major company such as Amazon, which has grown significantly over time.
The ticker from yahoo finance is " \textbf{\textit{AMZN}} " on the Nasdaq stock exchange \href{https://finance.yahoo.com/quote/AMZN/.}{AMAZON on Yahoo Finance}
First, importing the Amazon stock with yfinance, then display the pandas table.
We will import 25 years, 8 months and 25 days of data (from 1999-01-21 to 2024-10-16).

\subsection{Data Table}
The data printed here, is the preview of the Amazon stock extraction from yahoo fiannce:
% LaTeX table from 'table.tex'
\begin{table}[h!]
    \centering
    \input{table.tex}  
    \caption{Preview of Amazon Stock Data from Yahoo Finance}
    \label{tab:amazon_stock_preview}
\end{table}



\subsection{Checking the 25 Years range condition}

We have to check that the data is correctly displayed over a 25years range, hopefully, 
the introduction from Amazon is from january 1999, so it we should be able to find a 25 year range
of data of the Amazon stock. To check that we can compute a python code to count the gaps and visualize 
the dates of gaps in order to see for any huge gap that would be problematic for analyzing data.

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{Img/MissingDates(2010_to_2011).pdf}
    \caption{Missing Dates in Full Date Range (2010 to 2011)}
    \label{fig:missing_dates}
\end{figure}

We count only 9 days without data over the 25-year range. Thus, the full data contains at least 25 years of values

\section{First Results}

\subsection{Prices Evolutions}

Then, ploting the prices evolution:

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{Img/prices_time.pdf}
    \caption{Prices over time by frequency}
    \label{fig:prices_time}
\end{figure}

\subsection{Calculating Returns}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{Img/log_returns.pdf}
    \caption{Prices, returns and log returns}
    \label{fig:log_returns}
\end{figure}

\subsection{Squared Returns}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{Img/squared_log_returns.pdf}
    \caption{Squared daily returns and daily log returns}
    \label{fig:squared_logreturns}
\end{figure}

\section{Amazon and the 8 Stylized Facts}
\subsection{Prices are non-stationary}

The first feature that will highlight non-stationarity of the prices is the comparison of \( p(t) \) vs \( p(t-1) \).

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.8\textwidth]{Img/LogptVSLogpt-1.pdf}
    \caption{Comparison of \( \log(p_t) \) vs \( \log(p_{t-1}) \)}
    \label{fig:LogptVSLogpt-1}
\end{figure}

\appendix

\lstset{
    language=Python,
    backgroundcolor=\color{codebackground},   % Background color
    basicstyle=\ttfamily\footnotesize,        % Font and size
    breaklines=true,                          % Automatic line breaking
    frame=single,                             % Frame around code
    numbers=left,                             % Line numbers on the left
    numberstyle=\tiny\color{gray},            % Line number style
    keywordstyle=\color{codeblue}\bfseries,   % Keyword color
    commentstyle=\color{codegreen}\itshape,   % Comment color
    stringstyle=\color{codepurple},           % String color
    showstringspaces=false,                   % Hide string spaces
    captionpos=b,                             % Caption position: bottom
    tabsize=4                                 % Tab width
}

\input{code_appendix.tex}  % Include the code appendix


\end{document}